angular.module("oil.invoiceManagementCtrl",["oil.UtilService","oil.services","oil.UserService"]).controller("invoiceQueryCtrl",function($location,$scope,$log,servicesRequest,Storage,Util,User,$ionicLoading,$ionicHistory,$state){var getInvoice=function(token){servicesRequest.InoviceService(token).success(function(data){$ionicLoading.hide();var statusCode=data.code;var message=data.message;if(statusCode==100){var content=JSON.parse(data.content);$scope.content=content;}else{Util.ionicPopupAlert(message);}}).error(function(error){}).finally(function(){});};$scope.saveIovoice=function(){var contents=$scope.content;servicesRequest.InoviceSaveService(contents.invoice_account,contents.invoice_name,contents.post_addr,token).success(function(data){$ionicLoading.hide();var statusCode=data.code;var message=data.message;if(statusCode==100){Util.ionicPopupAlert("保存成功").then(function(res){$state.go("tab.home");});}else{Util.ionicPopupAlert(message);}}).error(function(error){Util.ionicPopupAlert("保存失败，请重试");}).finally(function(){});};var token=$location.search().token;if(token==null||token==""){token=User.getToken();}
  Storage.set("token",token);getInvoice(token);});
